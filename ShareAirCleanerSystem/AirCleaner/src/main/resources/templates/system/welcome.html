<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>首页</title>
    <link rel="stylesheet" href="../frame/layui/css/layui.css">
    <link rel="stylesheet" href="../frame/static/css/style.css">
    <link rel="stylesheet" href="../frame/static/css/welcome.css" />
    <link rel="icon" href="../frame/static/image/code.png">
</head>
<body class="body">
	
	<div class="div-1">   
	    <div class="shange">
	    	<h6 class="shange-1">提现申请</h6>
	    	<h1 id="cashApplyId" class="shange-2" >0</h1>
	    </div>
	    <div class="shange">
	    	<h6 class="shange-1">退款申请</h6>
	    	<h1 id="refundApplyId" class="shange-2" >0</h1>
	    </div>
	    <div class="shange">
	    	<h6 class="shange-1">今日订单数</h6>
	    	<h1 id="todayOrderId" class="shange-2" >0</h1>
	    </div>
	    <div class="shange" style="margin-right: auto;">
	    	<h6 class="shange-1">成交量</h6>
	    	<h1 id="volumeId" class="shange-2" >0</h1>
	    </div>
	    
	</div>
	<div class="div-2">   
	    <div class="shange-3">
	    	<h6 class="shange-1">设备数量</h6>
	    	<h1 id="deviceId"class="shange-2" >0</h1>
	    </div>
	    <div class="shange-3">
	    	<h6 class="shange-1">设备在线数量</h6>
	    	<h1 id="deviceOnlineId" class="shange-2">0</h1>
	    </div>
	    <div class="shange-3" style="margin-right: auto;">
	    	<h6 class="shange-1">扫码量</h6>
	    	<h1 id="sweepCodeCountId" class="shange-2" >0</h1>
	    </div>
	</div>
		<div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
        <div class="layui-collapse" >
            <div class="layui-colla-item">
                <h2 class="tixian">扫码率</h2>
                <div class="layui-colla-content layui-show">      
                    <br/>
                    <div class="layui-progress layui-progress-big" lay-showPercent="true" lay-filter = "sweepCodeRateId">
                        <div class="layui-progress-bar layui-bg-orange" lay-percent="0%"></div>
                    </div>

                </div>
            </div>
        </div>
        <div class="layui-collapse">
            <div class="layui-colla-item">
                <h2 class="tixian">成交率</h2>
                <div class="layui-colla-content layui-show">                   
                    <br/>
                    <div class="layui-progress layui-progress-big" lay-showPercent="true" lay-filter="volumeRateId">
                        <div class="layui-progress-bar layui-bg-blue" lay-percent="0%"></div>
                    </div>

                </div>
            </div>
        </div>
       </div>
<script type="text/javascript" src="../frame/layui/layui.js"></script>
<script type="text/javascript" src="../js/index.js"></script>
<script type="text/javascript" src="../js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="../frame/echarts/echarts.min.js"></script>
<script type="text/javascript">
    layui.use(['element', 'form', 'table', 'layer', 'vip_tab'], function () {
        var form = layui.form
                , table = layui.table
                , layer = layui.layer
                , vipTab = layui.vip_tab
                , element = layui.element
                , $ = layui.jquery;
        var index = layer.load(2, {content:'数据分析中...',success: function (layero){
       	 layero.find('.layui-layer-content').css({
       	            'padding-left': '39px',
       	            'padding-top': '5px',
       	            'width': '100px'
       	        });
       	} }); 
        $.ajax({
      		 type:"POST",
      		 url:"../../../current/report", 
      		 contentType: 'application/json',
      		 data : {},
      		 success:function(data){
      			 if (data) {
      				 $("#cashApplyId").text(data.cashApplyCount)
      				 $("#refundApplyId").text(data.refundApplyCount)
      				 $("#todayOrderId").text(data.todayOrder)
      				 $("#volumeId").text(data.volume)
      				 $("#deviceId").text(data.deviceCount)
      				 $("#deviceOnlineId").text(data.deviceOnlineCount)
      				 $("#sweepCodeCountId").text(data.sweepCodeCount)
      				 var param =setTimeout(function(){
      					 element.progress('sweepCodeRateId', data.sweepCodeRate)
          				 element.progress('volumeRateId', data.volumeRate)
      				 },1000)
      			 }
      			layer.close(index);  
      		 },
      		 error: function(errorMsg){
      			 layer.close(index);  
      			 alert("数据统计失败!");
      		 }
      	 });

    });
</script>
</body>
</html>